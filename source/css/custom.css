/* 霞鹜文楷 - 与等宽编程字体相性好的中文字体 */
@import url('https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1/style.css');

/* JetBrains Mono - 加载完整字符集（包含 box-drawing 字符 U+2500-U+257F） */
@font-face {
    font-family: 'JetBrains Mono';
    font-style: normal;
    font-weight: 400;
    font-display: swap;
    src: url('https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@5/files/jetbrains-mono-all-400-normal.woff2') format('woff2');
}

@font-face {
    font-family: 'JetBrains Mono';
    font-style: normal;
    font-weight: 700;
    font-display: swap;
    src: url('https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@5/files/jetbrains-mono-all-700-normal.woff2') format('woff2');
}

@font-face {
    font-family: 'JetBrains Mono';
    font-style: italic;
    font-weight: 400;
    font-display: swap;
    src: url('https://cdn.jsdelivr.net/npm/@fontsource/jetbrains-mono@5/files/jetbrains-mono-all-400-italic.woff2') format('woff2');
}

/* 全局字体：JetBrains Mono 处理 ASCII/Latin，霞鹜文楷处理中文，排除 LaTeX 及 iconfont */
body,
body *:not(.iconfont):not([class*="icon-"]):not(.katex):not(.katex *):not(.katex-html):not(.katex-html *):not(.MathJax):not(.MathJax *):not(.MathJax_Display):not(.MathJax_Display *):not(mjx-container):not(mjx-container *) {
    font-family: 'JetBrains Mono', 'LXGW WenKai', monospace !important;
    font-variant-ligatures: common-ligatures !important;
}

/* 代码块额外保证 */
pre,
pre *,
code,
code.hljs,
.hljs,
.code-area>pre,
figure.highlight,
figure.highlight pre,
figure.highlight .code,
figure.highlight td.code pre {
    font-family: 'JetBrains Mono', monospace !important;
    font-variant-ligatures: common-ligatures !important;
}

/* 减小文章内容的左右内边距，使文字显示更宽 */
.post-content {
    padding-left: 2rem !important;
    padding-right: 2rem !important;
}

/* 针对移动端，保持较小的内边距 */
@media (max-width: 767px) {
    .post-content {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }

    /* 让中间的内容栏占满整个宽度 */
    #board-ctn {
        width: 100% !important;
        max-width: 100% !important;
    }
}

/* 在大屏幕上调整布局，将目录放到左边，加宽中间内容栏 */
@media (min-width: 992px) {

    /* 调整左侧侧边栏(目录)宽度，使其变窄 */
    .row.nomargin-x>.side-col.d-none.d-lg-block.col-lg-2:first-child {
        flex: 0 0 15% !important;
        max-width: 15% !important;
    }

    /* 调整中间内容区域宽度，使其占据更多空间 */
    .row.nomargin-x>.col-lg-8 {
        flex: 0 0 85% !important;
        max-width: 85% !important;
    }

    /* 隐藏右侧空白侧边栏 */
    .row.nomargin-x>.side-col.d-none.d-lg-block.col-lg-2:last-child {
        flex: 0 0 0% !important;
        max-width: 0% !important;
    }

    /* 关键：去除中间容器的 Bootstrap 默认最大宽度限制，使其填满列宽 */
    #board-ctn {
        max-width: 100% !important;
    }
}

/* Dark mode support for TikZJax SVGs */
[data-user-color-scheme="dark"] .tikzjax {
    filter: invert(1);
}

.tikzjax {
    zoom: 2.5;
}

/* 代码块折叠/展开 */
figure.highlight {
    position: relative;
    overflow: hidden;
}

/* header 条 - 收起状态：整行可点击，居中展示语言+提示 */
.code-toggle-header {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 7px 14px;
    cursor: pointer;
    user-select: none;
    border-bottom: 2px dashed rgba(255, 255, 255, 0.12);
    transition: background 0.2s;
    background: rgba(255, 255, 255, 0.04);
}

.code-toggle-header:hover {
    background: rgba(255, 255, 255, 0.09);
}

.code-toggle-lang {
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 0.08em;
    color: rgba(255, 255, 255, 0.45);
    text-transform: uppercase;
}

.code-toggle-hint {
    font-size: 12px;
    letter-spacing: 0.04em;
    color: rgba(255, 255, 255, 0.55);
    transition: color 0.2s;
}

.code-toggle-header:hover .code-toggle-hint {
    color: rgba(255, 255, 255, 0.9);
}

/* 展开状态：header 变为左对齐窄条，只显示收起按钮，不遮挡右侧复制按钮 */
.code-toggle-expand-btn {
    display: none;
    align-items: center;
    gap: 4px;
    background: transparent;
    border: 1px solid rgba(130, 180, 255, 0.3);
    border-radius: 4px;
    padding: 2px 8px;
    font-size: 11px;
    color: rgba(130, 180, 255, 0.75);
    cursor: pointer;
    transition: all 0.2s;
    font-family: inherit;
    line-height: 1.6;
}

.code-toggle-expand-btn:hover {
    background: rgba(130, 180, 255, 0.15);
    color: rgba(130, 180, 255, 1);
    border-color: rgba(130, 180, 255, 0.6);
}

/* 收起状态 */
figure.highlight.code-collapsed table,
figure.highlight.code-collapsed>pre {
    display: none;
}

figure.highlight.code-collapsed .code-toggle-header {
    justify-content: center;
    border-bottom: 2px dashed rgba(255, 255, 255, 0.12);
}

figure.highlight.code-collapsed .code-toggle-lang {
    display: inline;
}

figure.highlight.code-collapsed .collapsed-hint {
    display: inline;
}

figure.highlight.code-collapsed .code-toggle-expand-btn {
    display: none;
}

/* 展开状态：header 左对齐，只显示收起按钮 */
figure.highlight.code-expanded .code-toggle-header {
    justify-content: flex-start;
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    background: transparent;
    padding: 5px 10px;
    cursor: default;
}

figure.highlight.code-expanded .code-toggle-lang {
    display: none;
}

figure.highlight.code-expanded .collapsed-hint {
    display: none;
}

figure.highlight.code-expanded .code-toggle-expand-btn {
    display: inline-flex;
}